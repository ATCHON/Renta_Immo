# Story 2.6.1: Gestion de plusieurs scénarios (Mémoire vive)

Status: ready-for-dev

## Story

**As an** investisseur immobilier,
**I want** tester différentes variations d'un même projet (prix, taux, travaux) sans perdre les simulations précédentes,
**so that** je puisse comparer les résultats et affiner ma stratégie d'investissement.

## Acceptance Criteria

1. [ ] **Multi-scénarios** : Possibilité de gérer jusqu'à 3 scénarios simultanément.
2. [ ] **Action "Dupliquer"** : Pouvoir créer une copie d'un scénario existant pour tester une variante.
3. [ ] **Navigation fluide** : Alterner entre les scénarios via des onglets (Tabs) sur la page de résultats.
4. [ ] **Nommage** : Chaque scénario peut être renommé (ex: "Scénario A", "Négociation -10%").
5. [ ] **Isolation des données** : Les modifications dans le formulaire ne s'appliquent qu'au scénario actif.
6. [ ] **Volatilité** : Les données sont conservées dans le state Zustand mais ne sont pas persistées en DB/LocalStorage (hors scope).

## Tasks / Subtasks

- [ ] **Task 1: Adaptation du Zustand Store** (AC: 1, 5, 6)
  - [ ] Modifier `src/stores/calculateur.store.ts` pour stocker une liste de scénarios au lieu d'un objet unique.
  - [ ] Ajouter `activeScenarioIndex` pour suivre le scénario en cours d'édition.
  - [ ] Mettre à jour les setters pour qu'ils ciblent le scénario actif.
- [ ] **Task 2: UI de gestion des scénarios** (AC: 2, 3, 4)
  - [ ] Ajouter un composant `ScenarioTabs` dans le header ou au-dessus des résultats.
  - [ ] Implémenter le bouton "Ajouter/Dupliquer" et l'option "Renommer".
  - [ ] Gérer la suppression d'un scénario (avec confirmation).

## Dev Notes

### Architecture Patterns
- **Store Zustand** : Utiliser un tableau `scenarios: ScenarioData[]`. Chaque `ScenarioData` contient `bien`, `financement`, etc.
- **Hooks** : S'assurer que `useCalculateur` et les hooks associés pointent vers le scénario sélectionné.
- **Performance** : Le calcul API doit être déclenché pour le scénario actif lors de la navigation ou de la modification.

### Source Tree Components
- Logic : `src/stores/calculateur.store.ts`.
- UI : `src/components/layout/Header.tsx` (ou nouveau composant), `src/components/results/Dashboard.tsx`.

### Testing Standards
- État : Vérifier que passer du Scénario 1 au Scénario 2 ne mélange pas les données.
- Limite : Empêcher la création de plus de 3 scénarios.

### References
- [PRD: Section 2.1 FR20](file:///d:/Devs/Renta_Immo/docs/prd.md#L78)
- [Architecture: Section 4.2 Sequence Diagram](file:///d:/Devs/Renta_Immo/docs/architecture.md#L164)

## Dev Agent Record

### Agent Model Used
Antigravity (Google Deepmind)

### Completion Notes List
- Detailed guide for multi-scenario logic in Zustand.
- Focus on memory-only persistence (volatility).
